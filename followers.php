<?php	//This section sets up TwitterOAuth. Insert your consumer keys, tokens, etc. below.	require "twitteroauth/autoload.php";	use Abraham\TwitterOAuth\TwitterOAuth;	$consumerkey = "abcdefghijklmnopqrstuvwxy";	$consumersecret = "12345678910111213141516171819202122232425262728293";	$accesstoken = "a1b2c3d4e5f6g7h8i9j10k11l12m13n14o15p16q17r18s19t2";	$accesstokensecret = "aabbccddeeffgghhiijjkkllmmnnooppqqrrssttuuvvw";	 	function getConnectionWithAccessToken($cons_key, $cons_secret, $oauth_token, $oauth_token_secret) {	  $connection = new TwitterOAuth($cons_key, $cons_secret, $oauth_token, $oauth_token_secret);	  return $connection;	}	 	$connection = getConnectionWithAccessToken($consumerkey, $consumersecret, $accesstoken, $accesstokensecret);		//Retrieve the list of follower ids. Replace SCREEN_NAME with your screen name here (without the @).		$followerIds = $connection->get("followers/ids", ["screen_name" => "SCREEN_NAME"]);	$newFollowerIds = $followerIds->ids;		if ($connection->getLastHttpCode() == 200) { //if the connection is OK		//retrieve the current list of followers from MySQL		//replace the MySQL settings here with your DB settings			$username="username";		$password = "password";		$database="database";		$mysqli = new mysqli("localhost", $username, $password, $database);		if ($mysqli->connect_errno) {			print "Error connecting to database.";			exit;		}		//setup an empty array to store ids that have unfollowed		$unfollowed = array();						$query = "SELECT * FROM `followers`";		$result = $mysqli->query($query);		//loop through the previously stored followers and check to see if they are still following.		//if they aren't, add them to the $unfollowed array		while ($row = $result->fetch_assoc()) {			$oldFollowerId = $row["id"];			$found = array_search($oldFollowerId, $newFollowerIds);			if ($found !== FALSE) {			} else {				array_push($unfollowed, $oldFollowerId);			}			}				//retrieve screennames for each id and send an email		//this assumes that you haven't had more than 100 users unfollow you as users/lookup has a limit of 100		//if you want to check more than this you will need to implement cursors		$oldFollowers = $connection->get("users/lookup",  array('user_id' => implode(',', $unfollowed)));		if (isset($oldFollowers[0])) {			$emailString = "You have been unfollowed by:\n\n";			foreach ($oldFollowers as $oldFollower) {				$emailString .= "@" . $oldFollower->screen_name . " (" . $oldFollower->name . ")\n";			}			//send an email with details of anyone who has unfollowed. Replace EMAIL@ADDRESS with your email address			mail("EMAIL@ADDRESS", "Twitter users unfollowed", $emailString, "From: Twitter Follower Script <EMAIL@ADDRESS>");		}		//drop the existing follower table and populate with the latest ids		$query = "TRUNCATE TABLE `followers`";		$result = $mysqli->query($query);		foreach($newFollowerIds as $newFollowerId) {			$query = "INSERT INTO `followers` (`id`) VALUES ('" . $newFollowerId . "')";			$result = $mysqli->query($query);		}				$mysqli->close();	} else {		print "Error - don't do anything.";	}?>